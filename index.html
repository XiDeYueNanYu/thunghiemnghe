<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Thêm viewport để tối ưu hóa di động -->
    <title>越南语听力练习</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            margin: 0; 
            padding-bottom: 300px; /* Mặc định cho màn hình lớn */
            background-color: #ffffff; /*f7fbf3  3f4040*/
        }
        #gameContainer {
            display: block;
            min-height: calc(100vh - 150px); /* Đảm bảo nội dung chiếm đủ chiều cao màn hình */
        }
        #infoBox { 
            width: 95%; 
            max-width: 700px;
            min-height: 100px; 
            margin: 0 auto; 
            border: 10px solid #4990cc; /*4990cc 56a1d1*/
            background: #f9f9f9; /*ecf2e4 fefefc*/
            color: #4990cc; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 90%; 
            max-width: 700px;
            min-height: 25px; 
            margin: 0px auto; 
            border: 3px solid #4990cc; 
            background: #fefefc; 
            color: #4990cc; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(16px, 2vw, 20px); 
            font-weight: bold;
        }
        #instructionBox { 
            width: 90%; 
            max-width: 700px;
            min-height: 25px; 
            margin: 0px auto; 
            border: 3px solid #4990cc; 
            background: #fefefc; 
            color: #4990cc; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(16px, 2vw, 20px); 
            font-weight: bold;
        }
        #controls { 
            position: fixed; /* Cố định ở cuối màn hình */
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 800px; /* Giới hạn chiều rộng tối đa */
            background: #fefefc;
			border: 10px solid #4990cc;			
            padding: 10px 0; 
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2); 
            z-index: 1000; 
        }
        #controls div {
            margin: 5px 0; 
            display: flex;
            justify-content: center;
            align-items: center;
        }
        button { 
            padding: 8px 8px; 
            margin: 0 5px; 
            cursor: pointer; 
            border: 3px solid #5d757d; 
            background: #0f1314; /*192332*/
            color: #fffbef; 
            font-size: 28px; 
            border-radius: 5px; 
        }
        #sentenceNumber { 
            width: 50px; 
            padding: 10px; 
            text-align: center; 
            border: 3px solid #68838B; 
            background: #FFAD5B; 
            color: #000; 
            border-radius: 10px; 
            font-size: 16px; 
            -moz-appearance: textfield; 
        }
        #sentenceNumber::-webkit-inner-spin-button, 
        #sentenceNumber::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        #sentenceNumber:disabled { 
            background: #eee; 
        }
        .disabled { 
            cursor: not-allowed; 
            pointer-events: none; 
        }
        .active-mode { 
            border: 4px solid orange; 
        }
        #indicator { 
            width: 95%;
                        max-width: 700px; 
            min-height: 50px; 
            margin: 10px auto; 
                        padding: 5px;
            border: 5px solid orange; 
            background: #ffffe0; 
            border-radius: 10px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
        }
        #optionsContainer {
            width: 100%;
            max-width: 700px;
            margin: 10px auto;
        }
        .optionBtn {
            width: 95%; 
            max-width: 700px;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #b38728;
            background: #ffffff; /*E6EDD9*/
            color: #000;
            font-size: 30px;
            text-align: left;
            cursor: pointer;
            border-radius: 5px;
        }
        .optionBtn:hover {
            background: #D2E4C4;
        }
        .correct {
            background: #B7D7AA !important;
        }
        .wrong {
            background: #CE6D5E !important;
        }
        #score { 
            display: none; 
            width: 100%;
            max-width: 700px;
            margin: 10px auto; 
            color: #FF6820; 
            font-size: 30px; 
            text-align: center;
        }
        #wrongSentences { 
            display: none; 
            width: 95%; 
            max-width: 700px; 
            margin: 10px auto; 
            padding: 10px; 
            border: 2px solid #CE6D5E; 
            background: #FFF0F0; 
            color: #CE6D5E; 
            font-size: 30px; 
            text-align: left; 
            border-radius: 5px; 
        }
        #results { 
            display: none; 
            width: 95%;
            max-width: 700px;        
            margin: 10px auto; 
            padding: 10px; 
            border: 2px solid #734A2E; 
            background: #fffbef; 
            color: #000; 
            font-size: 30px; 
            text-align: left; 
            border-radius: 5px; 
            white-space: pre-line;
        }

        /* Media query cho thiết bị di động */
        @media (max-width: 768px) {
            body {
                padding-bottom: 200px; /* Giảm padding-bottom cho điện thoại */
            }
            #controls {
                padding: 5px 0; /* Giảm padding */
            }
            button {
                padding: 6px 6px; /* Giảm kích thước nút */
                font-size: 20px; /* Giảm kích thước chữ */
            }
            #sentenceNumber {
                width: 40px; /* Giảm chiều rộng */
                padding: 8px; /* Giảm padding */
                font-size: 14px; /* Giảm kích thước chữ */
            }
            .optionBtn {
                font-size: 20px; /* Giảm kích thước chữ cho đáp án */
                padding: 8px; /* Giảm padding */
            }
            #infoBox {
                font-size: clamp(30px, 4vw, 40px); /* Giảm kích thước chữ */
            }
            #contactBox, #instructionBox {
                font-size: clamp(14px, 2vw, 16px); /* Giảm kích thước chữ */
            }
            #indicator {
                min-height: 40px; /* Giảm chiều cao tối thiểu */
            }
            #results, #wrongSentences, #score {
                font-size: 24px; /* Giảm kích thước chữ */
                                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="infoBox">习得越南语<br>听力练习</div>
        <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
        <div id="instructionBox">选择与播放内容相符的选项</div>
        <div id="indicator"></div>
        <div id="optionsContainer"></div>
        <div id="results"></div>
        <div id="score">0/0</div>
        <div id="wrongSentences"></div>
    </div>
    <div id="controls">
        <div>
            <button id="freeModeBtn" class="active-mode">自由模式</button>
            <button id="testModeBtn">作业模式</button>
        </div>
        <div>
            <button id="autoContinueBtn">自动继续</button>
            <button id="showHideBtn">显示-隐藏</button>
        </div>
        <div>
            <button id="prevBtn">◀</button>
            <input type="text" id="sentenceNumber" inputmode="numeric" pattern="[0-9]*">
            <button id="nextBtn">▶</button>
            <button id="replayBtn">再听一遍</button>
        </div>
    </div>
    <audio id="mainAudio" src="audio.mp3"></audio>
    <audio id="correctAudio" src="Dung.mp3"></audio>
    <audio id="wrongAudio" src="Sai.mp3"></audio>

    <script>
        const audio = document.getElementById('mainAudio');
        const correctAudio = document.getElementById('correctAudio');
        const wrongAudio = document.getElementById('wrongAudio');
        const indicator = document.getElementById('indicator');
        const sentenceNumber = document.getElementById('sentenceNumber');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const replayBtn = document.getElementById('replayBtn');
        const freeModeBtn = document.getElementById('freeModeBtn');
        const testModeBtn = document.getElementById('testModeBtn');
        const autoContinueBtn = document.getElementById('autoContinueBtn');
        const showHideBtn = document.getElementById('showHideBtn');
        const scoreDisplay = document.getElementById('score');
        const wrongSentencesDisplay = document.getElementById('wrongSentences');
        const optionsContainer = document.getElementById('optionsContainer');
        const resultsDisplay = document.getElementById('results');

        const buttons = [prevBtn, nextBtn, replayBtn, freeModeBtn, testModeBtn, autoContinueBtn, showHideBtn];

const sentences = [
    {
        "audioFile": "audio.mp3",
        "start": 3.35,
        "end": 6.23,
        "correctAnswer": "Chúng tôi đi Trung Quốc bằng ô tô qua cửa khẩu Lạng Sơn.",
        "translation": "我们坐汽车经过谅山口岸去中国。",
        "options": [
            "Chúng tôi đi Trung Quốc bằng ô tô qua cửa khẩu Lạng Sơn.",
            "Chúng tôi đi Trung Quốc bằng ô tô qua cửa khâu Lạng Sơn.",
            "Chúng tôi đi Trung Quốc băng ô tô qua cửa khẩu Lạng Sơn.",
            "Chúng tôi đi Trung Quốc bằng ô tô qua cứa khẩu Lạng Sơn."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 8.45,
        "end": 10.81,
        "correctAnswer": "Chị mua rượu này ở đâu? Ở siêu thị hay chợ?",
        "translation": "你在哪里买的这瓶酒？在超市还是在市场？",
        "options": [
            "Chị mua rượu này ở đâu? Ở siêu thị hay chợ?",
            "Chị mua rượu này ở đâu? Ở siêu thụ hay chợ?",
            "Chị mua rượu này ở đâu? Ở tiêu thị hay chợ?",
            "Chị múa rượu này ở đâu? Ở siêu thị hay chợ?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 13.24,
        "end": 14.48,
        "correctAnswer": "Bà đã khai hải quan chưa ạ?",
        "translation": "您申报海关了吗？。",
        "options": [
            "Bà đã khai hải quan chưa ạ?",
            "Bà đã khai hải khoan chưa ạ?",
            "Bà đã khay hải quan chưa ạ?",
            "Bà đã khai hải quang chưa ạ?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 17.13,
        "end": 18.98,
        "correctAnswer": "Xin lỗi. Ông cho xem hộ chiếu.",
        "translation": "对不起，请出示护照。",
        "options": [
            "Xin lỗi. Ông cho xem hộ chiếu.",
            "Xin lỗi. Ông cho xem hộ chiểu.",
            "Xin lỗi. Ông cho xem hồ chiếu.",
            "Xin lỗi. Ông cho xem hộ chiếp."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 21.63,
        "end": 23.61,
        "correctAnswer": "Chị đặt vali lên đây để tôi kiểm tra.",
        "translation": "请把行李放在这里让我检查。",
        "options": [
            "Chị đặt vali lên đây để tôi kiểm tra.",
            "Chị đặt vali lên đay để tôi kiểm tra.",
            "Chị đặt va li lên đây để tôi kiểm cha.",
            "Chị dặt vali lên đây để tôi kiểm tra."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 26.16,
        "end": 27.66,
        "correctAnswer": "Bà có giấy tờ tùy thân không?",
        "translation": "您有身份证明文件吗？",
        "options": [
            "Bà có giấy tờ tùy thân không?",
            "Bà có giấy tờ tui thân không?",
            "Bà có dấy tờ tùy thân không?",
            "Bà có giấy tờ tùy thăm không?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 30.29,
        "end": 32.79,
        "correctAnswer": "Mời bà qua cửa này để chúng tôi kiểm tra hành lý.",
        "translation": "请您从这边过来，我们要检查行李。",
        "options": [
            "Mời bà qua cửa này để chúng tôi kiểm tra hành lý.",
            "Mời bà qua cứa này để chúng tôi kiểm tra hành lý.",
            "Mời bà qua cửa này để chúng tôi kiểm cha hàng lý.",
            "Mời ba qua cửa này để chúng tôi kiểm tra hành lý."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 35.386965,
        "end": 38.126965,
        "correctAnswer": "Xuống máy bay, họ phải chờ lâu để lấy hành lý.",
        "translation": "下飞机后，他们等了很久才拿到行李。",
        "options": [
            "Xuống máy bay, họ phải chờ lâu để lấy hành lý.",
            "Xuống máy bay, họ phai chờ lâu để lấy hành lý.",
            "Xuống máy bay, họ phải chờ lâu để lấy hành lục.",
            "Xuống máy bay, họ phải chờ lâu để lẩy hành lý."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 40.6,
        "end": 44.75,
        "correctAnswer": "Anh có quá nhiều CD trong vali. Đề nghị anh cho vào hành lý ký gửi.",
        "translation": "你的行李里有太多光盘了，请托运一部分。",
        "options": [
            "Anh có quá nhiều CD trong vali. Đề nghị anh cho vào hành lý ký gửi.",
            "Anh có quá nhiều CD trong vali. Đề nghị anh cho vào hành ly ký gửi.",
            "Anh có quá nhiều CD trong vali. Đề nghị anh cho vào hàng lý ký gửi.",
            "Anh có quá nhiều CD trong vali. Đề nghị anh cho vào hành lý kỳ gữi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 47.41,
        "end": 51.01,
        "correctAnswer": "Sau khi làm thủ tục hải quan, chúng tôi vào phòng chờ để đợi chuyến bay.",
        "translation": "办理完海关手续后，我们进入候机厅等候航班。",
        "options": [
            "Sau khi làm thủ tục hải quan, chúng tôi vào phòng chờ để đợi chuyến bay.",
            "Sau khi làm thử tục hải quan, chúng tôi vào phòng chờ để đợi chuyến bay.",
            "Sau khi làm thủ tục hải quan, chúng tôi vào phồng chờ để đợi chuyến bay.",
            "Sau khi làm thủ tục hải quang, chúng tôi vào phòng chờ để đợi chuyến bay."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 53.52,
        "end": 55.42,
        "correctAnswer": "Tôi cần tiết kiệm tiền để mua xe máy.",
        "translation": "我需要省钱来买摩托车。",
        "options": [
            "Tôi cần tiết kiệm tiền để mua xe máy.",
            "Tôi cần tiêt kiệm tiền để mua xe máy.",
            "Tôi cằn tiết kiệm tiền để mua xe máy.",
            "Tôi cần tiết kiệm tiền để mưa xe máy."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 58,
        "end": 60.97,
        "correctAnswer": "Tôi cần visa một năm để xin việc ở Việt Nam.",
        "translation": "我需要一年的签证来在越南找工作。",
        "options": [
            "Tôi cần visa một năm để xin việc ở Việt Nam.",
            "Tôi cần visa một nam để xin việc ở Việt Nam.",
            "Tôi cần visa một năm để sinh việc ở Việt Nam.",
            "Tôi cần visa một năm để xin việt ở Việt Nam."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 63.53,
        "end": 66.68,
        "correctAnswer": "Tôi cần gia hạn visa nên đang hỏi thủ tục làm visa.",
        "translation": "我需要延期签证，以便咨询办签证的手续。",
        "options": [
            "Tôi cần gia hạng visa nên đang hỏi thủ tục làm visa.",
            "Tôi cần ra hạn visa nên đang hỏi thủ tục làm visa.",
            "Tôi cần gia hạn visa nên đang hõi thủ tục làm visa.",
            "Tôi cần gia hạn visa nên đang hỏi thủ tục làm visa."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 69.2,
        "end": 71.92,
        "correctAnswer": "Tôi cần thuê nhà gần trường để đi học cho tiện.",
        "translation": "我需要在学校附近租房子，这样上学方便。",
        "options": [
            "Tôi cần thuê nhà gần trường để đi học cho tiện.",
            "Tôi cần thê nhà gần trường để đi học cho tiện.",
            "Tôi cần thuê nhà gần trường để đi học cho tiễn.",
            "Tôi cần thuê nhà gần trường để đi học cho tiện."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 74.47,
        "end": 78.3,
        "correctAnswer": "Tôi cần liên lạc với Viện Phát triển Ngôn ngữ để sưu tầm tài liệu về Hà Nội.",
        "translation": "我需要联系语言发展学院，以便收集关于河内的资料。",
        "options": [
            "Tôi cần liên lạc với Viện Phát triển Ngôn ngữ để sưu tầm tài liệu về Hà Nội.",
            "Tôi cần liên lạc với Viện Phát triển Ngôn ngữ để xưu tầm tài liệu về Hà Nội.",
            "Tôi cần liên lạc với Viện Phát triển Ngôn ngữ để sưu tằm tài liệu về Hà Nội.",
            "Tôi cần liên lạc với Viện Phát triễn Ngôn ngữ để sưu tầm tài liệu về Hà Nội."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 80.75,
        "end": 83.11,
        "correctAnswer": "Tôi cần nghỉ ngơi để có sức khỏe tốt hơn.",
        "translation": "我需要休息，以便身体更健康。",
        "options": [
            "Tôi cần nghỉ ngơi để có sức khỏe tốt hơn.",
            "Tôi cần nghĩ ngơi để có sức khỏe tốt hơn.",
            "Tôi cần nghỉ ngơi để có súc khỏe tốt hơn.",
            "Tôi cần nghỉ ngơi để có sức khoẻ tốt hờn."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 85.78,
        "end": 88.24,
        "correctAnswer": "Tôi cần gọi điện cho bạn để hỏi bài tập.",
        "translation": "我需要打电话给朋友问作业。",
        "options": [
            "Tôi cần gọi điện cho bạn để hỏi bài tập.",
            "Tôi cần gọi điện cho bạn để hỏi bày tập.",
            "Tôi cần gọi điên cho bạn để hỏi bài tập.",
            "Tôi cần gọi điện cho bản để hỏi bài tập."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 90.67,
        "end": 92.48,
        "correctAnswer": "Tôi cần mang theo hộ chiếu để làm thủ tục.",
        "translation": "我需要带护照去办理手续。",
        "options": [
            "Tôi cần mang theo hộ chiếu để làm thủ tục.",
            "Tôi cần mang theo hô chiếu để làm thủ tục.",
            "Tôi cần mang theo hộ chiểu để làm thủ tục.",
            "Tôi cần mang theo hộ chiếu để lam thủ tục."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 94.71,
        "end": 96.48,
        "correctAnswer": "Tôi cần đến trường sớm để kịp giờ học.",
        "translation": "我需要早点到学校，以便赶上上课时间。",
        "options": [
            "Tôi cần đến trường sớm để kịp giờ học.",
            "Tôi cần đến trường sớm để kịp giờ họt.",
            "Tôi cần đến trương sớm để kịp giờ học.",
            "Tôi cần đến trường sớm để kịb giờ học."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 98.67,
        "end": 100.93,
        "correctAnswer": "Nếu em cần vé máy bay, tôi sẽ mua giúp.",
        "translation": "如果你需要机票，我会帮你买。",
        "options": [
            "Nếu em cần vé máy bay, tôi sẽ mua giúp.",
            "Nếu em cần vé máy bay, tôi sẽ muă giúp.",
            "Nếu em càn vé máy bay, tôi sẽ mua giúp.",
            "Nếu em cần vé máy bay, tôi sẽ mưa giúp."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 103.27,
        "end": 105.88,
        "correctAnswer": "Nếu em cần địa chỉ của cô ấy, anh sẽ gửi cho em.",
        "translation": "如果你需要她的地址，我会发给你。",
        "options": [
            "Nếu em cần địa chỉ của cô ấy, anh sẽ gửi cho em.",
            "Nếu em cần địa chỉ của cô ấy, anh sẽ gửi cho en.",
            "Nếu em cần địa chỉ của cô ẩy, anh sẽ gửi cho eng.",
            "Nếu em cần địa chí của cô ấy, anh sẽ gửi cho em."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 108.16,
        "end": 110.49,
        "correctAnswer": "Nếu em cần đăng ký tạm trú, tôi sẽ đưa đi.",
        "translation": "如果你需要暂住登记，我会带你去。",
        "options": [
            "Nếu em cần đăng ký tạm trú, tôi sẽ đưa đi.",
            "Nếu em cần đăng kí tạm trú, tôi sẽ đưa đi.",
            "Nếu em cần đăng ký tạm trú, tôi sẽ đua đi.",
            "Nếu em cần đăng ký tạm chu, tôi sẽ đưa đi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 112.67,
        "end": 114.96,
        "correctAnswer": "Nếu em cần tiền, tôi sẽ cho vay.",
        "translation": "如果你需要钱，我会借给你。",
        "options": [
            "Nếu em cần tiền, tôi sẽ cho vay.",
            "Nếu em cần tiên, tôi sẽ cho vay.",
            "Nếu em cần tiền, tôi sẽ cho vây.",
            "Nếu em cần tiền, tôi sẻ cho vay."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 117.21,
        "end": 119.89,
        "correctAnswer": "Nếu em cần liên hệ với Viện, tôi sẽ cho địa chỉ.",
        "translation": "如果你需要联系学院，我会给你地址。",
        "options": [
            "Nếu em cần liên hệ với Viện, tôi sẽ cho địa chỉ.",
            "Nếu em cần liên hệ với Viện, tôi sẽ cho đia chỉ.",
            "Nếu em cần liên hệ với Viện, tôi sẽ cho địa chi.",
            "Nếu em cần liền hệ với Viện, tôi sẽ cho địa chỉ."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 122.07,
        "end": 124.56,
        "correctAnswer": "Nếu em cần thông tin về Viện, tôi sẽ cung cấp.",
        "translation": "如果你需要学院的信息，我会提供。",
        "options": [
            "Nếu em cần thông tin về Viện, tôi sẽ cung cấp.",
            "Nếu em cần thông tinh về Viện, tôi sẽ cung cấp.",
            "Nếu em cần thông tin về Viện, tôi sẽ cung cáp.",
            "Nếu em cần thông tin về Viện, tôi sẽ cung cập."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 126.73,
        "end": 129,
        "correctAnswer": "Nếu em cần xe máy, tôi sẽ cho mượn.",
        "translation": "如果你需要摩托车，我会借给你。",
        "options": [
            "Nếu em cần xe máy, tôi sẽ cho mượn.",
            "Nếu em cần xe máy, tôi sẽ cho muợn.",
            "Nếu em cần xe máy, tôi sẽ cho mươn.",
            "Nếu em cần xê máy, tôi sẽ cho mượn."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 131.64,
        "end": 133.43,
        "correctAnswer": "Em cần làm gì để có visa đi Việt Nam?",
        "translation": "我需要做什么才能获得越南签证？",
        "options": [
            "Em cần làm gì để có visa đi Việt Nam?",
            "Em cần lam gì để có visa đi Việt Nam?",
            "Em cần làm gì để có visa đi Việt Nam.",
            "Em cần làm gì để có viza đi Việt Nam?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 135.56,
        "end": 137.08,
        "correctAnswer": "Em cần đến đâu để nhận visa?",
        "translation": "我需要去哪里领取签证？",
        "options": [
            "Em cần đến đâu để nhận visa?",
            "Em cần đến đâu để nhận viza?",
            "Em cần đền đâu để nhận visa?",
            "Em cần đến đâu để nhạn visa?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 139.35,
        "end": 140.98,
        "correctAnswer": "Em cần đến đâu để đăng ký tạm trú?",
        "translation": "我需要去哪里办理临时居住登记？",
        "options": [
            "Em cần đến đâu để đăng ký tạm trú?",
            "Em cần đến đâu để đăng kỷ tạm trú?",
            "Em cần đến đâu để đắng ký tạm trú?",
            "Em cần đến đâu để đăng ký tạm trú."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 143.23,
        "end": 144.61,
        "correctAnswer": "Em cần làm gì để có thẻ thư viện?",
        "translation": "我需要做什么才能办图书馆卡？",
        "options": [
            "Em cần làm gì để có thẻ thư viện?",
            "Em cần làm gì để có thể thư viện?",
            "Em cần lam gì để có thẻ thư viện?",
            "Em cần làm gì để có thẻ thư viên?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 146.57,
        "end": 148.31,
        "correctAnswer": "Em cần mua giáo trình nào để học tiếng Việt?",
        "translation": "我需要买哪本教材来学习越南语？",
        "options": [
            "Em cần mua giáo trình nào để học tiếng Việt?",
            "Em cần mua giáo trình nào để học tiếng Việc?",
            "Em cần mua giáo trình nào để học tiến Việt?",
            "Em cần mua giáo trinh nào để học tiếng Việt?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 150.1,
        "end": 151.82,
        "correctAnswer": "Em cần gặp ai để làm thủ tục nhập học?",
        "translation": "我需要找谁来办理入学手续？",
        "options": [
            "Em cần gặp ai để làm thủ tục nhập học?",
            "Em cần gặp ai để làm thủ tục nhập học?",
            "Em cần gặp ai để làm thủ thục nhập học?",
            "Em cần gập ai để làm thủ tục nhập học?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 153.7,
        "end": 155.38,
        "correctAnswer": "Em cần đến ngân hàng nào để mở tài khoản?",
        "translation": "我需要去哪个银行开账户？",
        "options": [
            "Em cần đến ngân hàng nào để mở tài khoản?",
            "Em cần đến ngân hàng nào để mỡ tài khoản?",
            "Em cần đến ngân hảng nào để mở tài khoản?",
            "Em cần đến ngân hàng nào để mở tai khoản?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 157.55,
        "end": 158.89,
        "correctAnswer": "Em cần gặp ai để trả học phí?",
        "translation": "我需要找谁交学费？",
        "options": [
            "Em cần gặp ai để trả học phí?",
            "Em cần gặp ai để trả học phỉ?",
            "Em cần gập ai để trả học phí?",
            "Em cần gặp ai để chả học phí?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 160.66,
        "end": 161.82,
        "correctAnswer": "(Tôi đói quá rồi.). - Thế thì đi ăn ngay đi.",
        "translation": "那就赶快去吃吧。",
        "options": [
            "(Tôi đói quá rồi.). - Thế thì đi ăn ngay đi.",
            "(Tôi đói quá rồi.). - Thế thì đi ăn ngây đi.",
            "(Tôi đói quá rồi.). - Thế thì đi ăng ngay đi.",
            "(Tôi đói quá rồi.). - Thế thì đi ăn ngay di."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 163.61,
        "end": 165.8,
        "correctAnswer": "(Cái áo này vừa rộng vừa dài.). - Thế thì đừng mua, chọn cái khác.",
        "translation": "那就别买了，换一件别的吧。",
        "options": [
            "(Cái áo này vừa rộng vừa dài.). - Thế thì đừng mua, chọn cái khác.",
            "(Cái áo này vừa rộng vừa dài.). - Thế thì đừng mua, chon cái khác.",
            "(Cái áo này vừa rộng vừa dài.). - Thế thì đừng muă, chọn cái khác.",
            "(Cái áo này vừa rộng vừa dài.). - Thế thì đừng mua, chọn cai khác."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 167.64,
        "end": 169.21,
        "correctAnswer": "(Ngày mai chúng ta thi rồi.). - Thế thì tối nay phải ôn bài cẩn thận.",
        "translation": "那今晚一定要认真复习。",
        "options": [
            "(Ngày mai chúng ta thi rồi.). - Thế thì tối nay phải ôn bài cẩn thận.",
            "(Ngày mai chúng ta thi rồi.). - Thế thì tối nay phải ôn bải cẩn thận.",
            "(Ngày mai chúng ta thi rồi.). - Thế thì tôi nay phải ôn bài cẩn thận.",
            "(Ngày mai chúng ta thi rồi.). - Thế thì tối nay phải ôn bày cẩn thận."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 170.99,
        "end": 172.4,
        "correctAnswer": "(Tôi vừa đọc hết cuốn sách này. – Hay lắm.). - Thế thì cho tôi mượn đọc với.",
        "translation": "那就借我看看吧。",
        "options": [
            "(Tôi vừa đọc hết cuốn sách này. – Hay lắm.). - Thế thì cho tôi mượn đọc với.",
            "(Tôi vừa đọc hết cuốn sách này. – Hay lắm.). - Thế thì cho tôi mượn đoc với.",
            "(Tôi vừa đọc hết cuốn sách này. – Hay lắm.). - Thế thì cho tôi mượn đọc vơi.",
            "(Tôi vừa đọc hết cuốn sách này. – Hay lắm.). - Thế thì cho tôi mượn đọc vớ."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 174.19,
        "end": 175.52,
        "correctAnswer": "(Trong nhà tôi hết đồ ăn rồi.). - Thế thì đi chợ mua thêm đi.",
        "translation": "那就去市场再买一些吧。",
        "options": [
            "(Trong nhà tôi hết đồ ăn rồi.). - Thế thì đi chợ mua thêm đi.",
            "(Trong nhà tôi hết đồ ăn rồi.). - Thế thì đi chợ muă thêm đi.",
            "(Trong nhà tôi hết đồ ăn rồi.). - Thế thì đi chợ mua thêm di.",
            "(Trong nhà tôi hết đồ ăn rồi.). - Thế thì đi chơ mua thêm đi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 177.29,
        "end": 179.16,
        "correctAnswer": "(Tôi rất thích học tiếng Việt.). - Thế thì đăng ký học thêm một khóa nữa đi.",
        "translation": "那就再报名一个课程吧。",
        "options": [
            "(Tôi rất thích học tiếng Việt.). - Thế thì đăng ký học thêm một khóa nữa đi.",
            "(Tôi rất thích học tiếng Việt.). - Thế thì đăng kí học thêm một khóa nữa đi.",
            "(Tôi rất thích học tiếng Việt.). - Thế thì đăng ký học thêm một khóa nưa đi.",
            "(Tôi rất thích học tiếng Việt.). - Thế thì đắng ký học thêm một khóa nữa đi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 180.94,
        "end": 182.85,
        "correctAnswer": "(Tôi đã có visa rồi.). - Thế thì chuẩn bị hành lý để sang Việt Nam đi.",
        "translation": "那就准备行李去越南吧。",
        "options": [
            "(Tôi đã có visa rồi.). - Thế thì chuẩn bị hành lý để sang Việt Nam đi.",
            "(Tôi đã có visa rồi.). - Thế thì chuẩn bị hành lí để sang Việt Nam đi.",
            "(Tôi đã có visa rồi.). - Thế thì chuẩn bị hành lý để sang Việt Nam di.",
            "(Tôi đã có visa rồi.). - Thế thì chuản bị hành lý để sang Việt Nam đi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 184.59,
        "end": 186.25,
        "correctAnswer": "(Tuần sau anh chị ấy cưới đấy.). - Thế thì nhớ mua quà và đi dự nhé.",
        "translation": "那就记得买礼物，去参加吧。",
        "options": [
            "(Tuần sau anh chị ấy cưới đấy.). - Thế thì nhớ mua quà và đi dự nhé.",
            "(Tuần sau anh chị ấy cưới đấy.). - Thế thì nhớ mua quà và đi dư nhé.",
            "(Tuần sau anh chị ấy cưới đấy.). - Thế thì nhớ muă quà và đi dự nhé.",
            "(Tuần sau anh chị ấy cưới đấy.). - Thế thì nhớ mua quà và đi dự nghé."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 187.94,
        "end": 189.48,
        "correctAnswer": "(Các hãng hàng không không đang khuyến mại vé tháng này đấy.). - Thế thì đợi sang tháng rồi mua.",
        "translation": "那就等到下个月再买吧。",
        "options": [
            "(Các hãng hàng không không đang khuyến mại vé tháng này đấy.). - Thế thì đợi sang tháng rồi mua.",
            "(Các hãng hàng không không đang khuyến mại vé tháng này đấy.). - Thế thì đợi sang thang rồi mua.",
            "(Các hãng hàng không không đang khuyến mại vé tháng này đấy.). - Thế thì đợi sang tháng rùi mua.",
            "(Các hãng hàng không không đang khuyến mại vé tháng này đấy.). - Thế thì đơi sang tháng rồi mua."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 191.13,
        "end": 192.71,
        "correctAnswer": "(Viện Phát triển Ngôn ngữ đang chuẩn bị mở lớp tiếng Việt mới đấy.). - Thế thì đăng ký tham gia ngay đi.",
        "translation": "那就赶快报名参加吧。",
        "options": [
            "(Viện Phát triển Ngôn ngữ đang chuẩn bị mở lớp tiếng Việt mới đấy.). - Thế thì đăng ký tham gia ngay đi.",
            "(Viện Phát triển Ngôn ngữ đang chuẩn bị mở lớp tiếng Việt mới đấy.). - Thế thì đăng ký tham gia ngay di.",
            "(Viện Phát triển Ngôn ngữ đang chuẩn bị mở lớp tiếng Việt mới đấy.). - Thế thì đăng kì tham gia ngay đi.",
            "(Viện Phát triển Ngôn ngữ đang chuẩn bị mở lớp tiếng Việt mới đấy.). - Thế thì đăng ký tham ja ngay đi."
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 194.59,
        "end": 196.81,
        "correctAnswer": "(Em có visa rồi.). - Thế còn nhà ở, em sẽ thuê ở đâu?",
        "translation": "那住宿的地方，我要在哪里租呢？",
        "options": [
            "(Em có visa rồi.). - Thế còn nhà ở, em sẽ thuê ở đâu?",
            "(Em có visa rồi.). - Thế còn nha ở, em sẽ thuê ở đâu?",
            "(Em có visa rồi.). - Thế còn nhà ở, em sẽ thêu ở đâu?",
            "(Em có visa rồi.). - Thế còn nhà ở, em sẽ thuê ở dâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 198.56,
        "end": 201.19,
        "correctAnswer": "(Em thuê nhà rồi.). - Thế còn nơi tạm trú, em sẽ đăng ký ở đâu?",
        "translation": "那临时居住的地方，我要在哪里登记呢？",
        "options": [
            "(Em thuê nhà rồi.). - Thế còn nơi tạm trú, em sẽ đăng ký ở đâu?",
            "(Em thuê nhà rồi.). - Thế còn nơi tạm trú, em sẽ đăng kí ở đâu?",
            "(Em thuê nhà rồi.). - Thế còn nơi tạm trú, em sẽ đăng ký ở dâu?",
            "(Em thuê nhà rồi.). - Thế còn nơi tạm trú, em sẽ đăng khi ở đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 202.9,
        "end": 205.45,
        "correctAnswer": "(Em đăng ký tạm trú rồi.). - Thế còn tài khoản, em sẽ mở ở đâu?",
        "translation": "那账户我要在哪里开？",
        "options": [
            "(Em đăng ký tạm trú rồi.). - Thế còn tài khoản, em sẽ mở ở đâu?",
            "(Em đăng ký tạm trú rồi.). - Thế còn tài khoản, em sẽ mỡ ở đâu?",
            "(Em đăng ký tạm trú rồi.). - Thế còn tài khoản, em sẽ mở ở dâu?",
            "(Em đăng ký tạm trú rồi.). - Thế còn tai khoản, em sẽ mở ở đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 206.99,
        "end": 209.63,
        "correctAnswer": "(Em có nhà rồi.). - Thế còn thủ tục xin học, em sẽ làm ở đâu?",
        "translation": "那入学手续我要在哪里办理？",
        "options": [
            "(Em có nhà rồi.). - Thế còn thủ tục xin học, em sẽ làm ở đâu?",
            "(Em có nhà rồi.). - Thế còn thủ tục xin học, em sẽ lam ở đâu?",
            "(Em có nhà rồi.). - Thế còn thủ tục xinh học, em sẽ làm ở đâu?",
            "(Em có nhà rồi.). - Thế còn thủ tuc xin học, em sẽ làm ở đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 211.37,
        "end": 213.41,
        "correctAnswer": "(Em đăng ký học rồi.). - Thế còn học phí, em sẽ trả ở đâu?",
        "translation": "那学费我要在哪里交？",
        "options": [
            "(Em đăng ký học rồi.). - Thế còn học phí, em sẽ trả ở đâu?",
            "(Em đăng ký học rồi.). - Thế còn học phí, em sẽ chả ở đâu?",
            "(Em đăng ký học rồi.). - Thế còn học phi, em sẽ trả ở đâu?",
            "(Em đăng ký học rồi.). - Thế còn học phí, em sẽ trả ơ đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 215.13,
        "end": 217.29,
        "correctAnswer": "(Em bắt đầu học rồi.). - Thế còn giáo trình, em sẽ mua ở đâu?",
        "translation": "那教材我要在哪里买？",
        "options": [
            "(Em bắt đầu học rồi.). - Thế còn giáo trình, em sẽ mua ở đâu?",
            "(Em bắt đầu học rồi.). - Thế còn giao trình, em sẽ mua ở đâu?",
            "(Em bắt đầu học rồi.). - Thế còn giáo trình, em sẽ muă ở đâu?",
            "(Em bắt đầu học rồi.). - Thế còn giáo trình, em sẽ mua ơ đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 218.92,
        "end": 221.44,
        "correctAnswer": "(Em học xong rồi.). - Thế còn chứng chỉ, em sẽ lấy ở đâu?",
        "translation": "那证书我要在哪里领取？",
        "options": [
            "(Em học xong rồi.). - Thế còn chứng chỉ, em sẽ lấy ở đâu?",
            "(Em học xong rồi.). - Thế còn chứng chỉ, em sẽ lây ở đâu?",
            "(Em học xong rồi.). - Thế còn chưng chỉ, em sẽ lấy ở đâu?",
            "(Em học xong rồi.). - Thế còn chứng chỉ, em sẽ lấy ơ đâu?"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 223.13,
        "end": 225.55,
        "correctAnswer": "(Em mua xe máy rồi.). - Thế còn bằng lái xe, em sẽ đổi ở đâu?",
        "translation": "那驾照我要在哪里更换？",
        "options": [
            "(Em mua xe máy rồi.). - Thế còn bằng lái xe, em sẽ đổi ở đâu?",
            "(Em mua xe máy rồi.). - Thế còn bằng láy xe, em sẽ đổi ở đâu?",
            "(Em mua xe máy rồi.). - Thế còn bằng lái xe, em sẽ đỗi ở đâu?",
            "(Em mua xe máy rồi.). - Thế còn bằng lái xe, em sẽ đổi ơ đâu?"
        ]
    }
];

        let currentIndex = 0;
        let isFreeMode = true;
        let correctCount = 0;
        let isPlaying = false;
        let correctSentences = new Set();
        let wrongSentences = new Set();
        let autoContinue = false;
        let showAnswer = false;
        let userAnswers = [];

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function init() {
            updateSentenceDisplay();
        }

        function updateSentenceDisplay() {
            sentenceNumber.value = currentIndex + 1;
            indicator.style.background = '#ffffe0';
            if (isFreeMode && showAnswer) {
                indicator.innerHTML = `
                    <div style="font-size: 18px; font-weight: bold; color: #38761d;">${sentences[currentIndex].translation}</div>
                `;
            } else {
                indicator.innerHTML = '';
            }
            updateOptions();
            if (!isFreeMode) updateScore();
        }

        function updateOptions() {
            optionsContainer.innerHTML = '';
            const shuffledOptions = shuffleArray(sentences[currentIndex].options);
            shuffledOptions.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'optionBtn';
                btn.textContent = option;
                btn.onclick = () => checkAnswer(option);
                optionsContainer.appendChild(btn);
            });
        }

        function playCurrentSentence() {
            if (isPlaying) audio.pause();
            buttons.forEach(btn => btn.classList.add('disabled'));
            sentenceNumber.disabled = true;
            isPlaying = true;
            audio.src = sentences[currentIndex].audioFile;
            audio.currentTime = sentences[currentIndex].start;
            audio.play().catch(error => {
                console.error('Audio playback failed:', error);
                alert('Vui lòng nhấn nút “再听一遍” để phát âm thanh.');
                buttons.forEach(btn => btn.classList.remove('disabled'));
                sentenceNumber.disabled = false;
                isPlaying = false;
            });

            audio.ontimeupdate = () => {
                if (audio.currentTime >= sentences[currentIndex].end) {
                    audio.pause();
                    audio.ontimeupdate = null;
                    buttons.forEach(btn => btn.classList.remove('disabled'));
                    sentenceNumber.disabled = false;
                    isPlaying = false;
                }
            };
        }

        function moveSentence(direction) {
            currentIndex = (currentIndex + direction + sentences.length) % sentences.length;
            updateSentenceDisplay();
            playCurrentSentence();
        }

        function checkAnswer(selectedAnswer) {
            const correctAnswer = sentences[currentIndex].correctAnswer;
            const optionButtons = optionsContainer.getElementsByClassName('optionBtn');
            
            // Clear previous styles
            for (let btn of optionButtons) {
                btn.classList.remove('correct', 'wrong');
                btn.disabled = !isFreeMode; // Only disable buttons in Test Mode
            }

            // Find and style the selected button
            for (let btn of optionButtons) {
                if (btn.textContent === selectedAnswer) {
                    if (selectedAnswer === correctAnswer) {
                        indicator.style.background = '#B7D7AA';
						indicator.innerHTML = `
                    <div style="font-size: 18px; font-weight: bold; color: #000000;">${sentences[currentIndex].translation}</div>
                `;
                        btn.classList.add('correct');
                        correctAudio.play().catch(error => {
                            console.error('Correct audio playback failed:', error);
                        });
                    } else {
                        indicator.style.background = '#CE6D5E';
						indicator.innerHTML = `
                    <div style="font-size: 18px; font-weight: bold; color: #000000;">${sentences[currentIndex].translation}</div>
                `;
                        btn.classList.add('wrong');
                        wrongAudio.play().catch(error => {
                            console.error('Wrong audio playback failed:', error);
                        });
                    }
                }
            }

            if (!isFreeMode) {
                userAnswers[currentIndex] = selectedAnswer;
                if (selectedAnswer === correctAnswer && !correctSentences.has(currentIndex)) {
                    correctCount++;
                    correctSentences.add(currentIndex);
                    wrongSentences.delete(currentIndex);
                } else if (selectedAnswer !== correctAnswer && !correctSentences.has(currentIndex)) {
                    wrongSentences.add(currentIndex);
                }
                updateScore();

                // Auto-move to next sentence in Test Mode
                const audioToWait = (selectedAnswer === correctAnswer) ? correctAudio : wrongAudio;
                audioToWait.onended = () => {
                    if (userAnswers.length === sentences.length) {
                        showResults();
                    } else {
                        setTimeout(() => {
                            moveSentence(1);
                        }, 200);
                    }
                };
            } else if (isFreeMode && autoContinue && selectedAnswer === correctAnswer) {
                // Auto-move in Free Mode only if answer is correct and autoContinue is enabled
                correctAudio.onended = () => {
                    setTimeout(() => {
                        moveSentence(1);
                    }, 200);
                };
            } else {
                correctAudio.onended = null;
                wrongAudio.onended = null;
            }
        }

        function updateScore() {
            scoreDisplay.textContent = `${correctCount}/${sentences.length}`;
            scoreDisplay.style.display = 'block'; // Hiển thị score trong Test Mode
        }

        function showResults() {
            let resultText = `练习完成！\n正确答案数量：${correctCount}/${sentences.length}\n正确率：${((correctCount / sentences.length) * 100).toFixed(2)}%\n错误题目：`;
            wrongSentences.forEach(index => {
                resultText += `\n第${index + 1}题：\n你的选择：${userAnswers[index] || '未选择'}\n正确答案：${sentences[index].correctAnswer}\n`;
            });
            if (wrongSentences.size === 0) {
                resultText += '\n全部正确！';
            }
            resultsDisplay.textContent = resultText;
            resultsDisplay.style.display = 'block';
        }

        prevBtn.onclick = () => {
            moveSentence(-1);
        };

        nextBtn.onclick = () => {
            moveSentence(1);
        };

        replayBtn.onclick = () => {
            playCurrentSentence();
        };

        freeModeBtn.onclick = () => {
            isFreeMode = true;
            freeModeBtn.classList.add('active-mode');
            testModeBtn.classList.remove('active-mode');
            autoContinueBtn.disabled = false;
            autoContinueBtn.classList.remove('disabled');
            showHideBtn.disabled = false;
            showHideBtn.classList.remove('disabled');
            scoreDisplay.style.display = 'none';
            wrongSentencesDisplay.style.display = 'none';
            resultsDisplay.style.display = 'none';
            updateSentenceDisplay();
        };

        testModeBtn.onclick = () => {
            isFreeMode = false;
            testModeBtn.classList.add('active-mode');
            freeModeBtn.classList.remove('active-mode');
            autoContinueBtn.disabled = true;
            autoContinueBtn.classList.add('disabled');
            showHideBtn.disabled = true;
            showHideBtn.classList.add('disabled');
            showHideBtn.classList.remove('active-mode');
            showAnswer = false;
            scoreDisplay.style.display = 'block';
            currentIndex = 0;
            correctCount = 0;
            correctSentences.clear();
            wrongSentences.clear();
            userAnswers = [];
            for (let i = 0; i < sentences.length; i++) {
                wrongSentences.add(i);
            }
            updateSentenceDisplay();
        };

        autoContinueBtn.onclick = () => {
            if (isFreeMode) {
                autoContinue = !autoContinue;
                autoContinueBtn.classList.toggle('active-mode');
                if (!autoContinue) {
                    correctAudio.onended = null;
                }
            }
        };

        showHideBtn.onclick = () => {
            if (isFreeMode) {
                showAnswer = !showAnswer;
                showHideBtn.classList.toggle('active-mode');
                updateSentenceDisplay();
            }
        };

        sentenceNumber.onchange = () => {
            if (!isPlaying) {
                const num = parseInt(sentenceNumber.value) - 1;
                if (!isNaN(num) && num >= 0 && num < sentences.length) {
                    currentIndex = num;
                    updateSentenceDisplay();
                    playCurrentSentence();
                } else {
                    alert(`输入范围： 1 到 ${sentences.length}`);
                    updateSentenceDisplay();
                }
            }
        };

        sentenceNumber.onkeydown = (e) => {
            if (!isPlaying) {
                if (e.key === 'ArrowLeft') {
                    moveSentence(-1);
                }
                if (e.key === 'ArrowRight') {
                    moveSentence(1);
                }
            }
        };

        init();
    </script>
</body>
</html>
